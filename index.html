<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة الطالب الذكي</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover:hover { transform: translateY(-5px); transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl font-bold">منصة الطالب الذكي</h1>
                <div class="flex items-center space-x-4 space-x-reverse">
                    <span id="userWelcome" class="hidden">مرحباً، طالب</span>
                    <button id="loginBtn" onclick="showLogin()" class="bg-white text-purple-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100">
                        تسجيل الدخول
                    </button>
                    <button id="logoutBtn" onclick="logout()" class="hidden bg-red-500 px-4 py-2 rounded-lg font-semibold hover:bg-red-600">
                        تسجيل الخروج
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Login Modal -->
    <div id="loginModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full mx-4">
            <h2 class="text-2xl font-bold text-center mb-6">تسجيل الدخول</h2>
            <div class="space-y-4">
                <input type="email" id="email" placeholder="البريد الإلكتروني" class="w-full p-3 border rounded-lg">
                <input type="password" id="password" placeholder="كلمة المرور" class="w-full p-3 border rounded-lg">
                <button onclick="login()" class="w-full bg-purple-600 text-white p-3 rounded-lg font-semibold hover:bg-purple-700">
                    دخول
                </button>
                <button onclick="googleLogin()" class="w-full bg-red-500 text-white p-3 rounded-lg font-semibold hover:bg-red-600 flex items-center justify-center">
                    <i class="fab fa-google ml-2"></i>
                    دخول بجوجل
                </button>
            </div>
            <button onclick="hideLogin()" class="absolute top-4 left-4 text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Dashboard -->
        <div id="dashboard" class="hidden">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-lg card-hover">
                    <div class="flex items-center">
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-trophy text-blue-600 text-xl"></i>
                        </div>
                        <div class="mr-4">
                            <h3 class="text-lg font-semibold">النقاط</h3>
                            <p class="text-2xl font-bold text-blue-600" id="userPoints">1250</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg card-hover">
                    <div class="flex items-center">
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-book text-green-600 text-xl"></i>
                        </div>
                        <div class="mr-4">
                            <h3 class="text-lg font-semibold">المواد</h3>
                            <p class="text-2xl font-bold text-green-600" id="subjectCount">5</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg card-hover">
                    <div class="flex items-center">
                        <div class="bg-purple-100 p-3 rounded-full">
                            <i class="fas fa-clock text-purple-600 text-xl"></i>
                        </div>
                        <div class="mr-4">
                            <h3 class="text-lg font-semibold">ساعات الدراسة</h3>
                            <p class="text-2xl font-bold text-purple-600" id="studyHours">24</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-lg card-hover cursor-pointer" onclick="showAI()">
                    <div class="text-center">
                        <div class="bg-blue-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-robot text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold mb-2">المساعد الذكي</h3>
                        <p class="text-gray-600">اسأل أي سؤال واحصل على إجابة فورية</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg card-hover cursor-pointer" onclick="showPlanner()">
                    <div class="text-center">
                        <div class="bg-green-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-calendar text-green-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold mb-2">المخطط الدراسي</h3>
                        <p class="text-gray-600">نظم جدولك الدراسي بذكاء</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg card-hover cursor-pointer" onclick="showTimer()">
                    <div class="text-center">
                        <div class="bg-purple-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-stopwatch text-purple-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold mb-2">مؤقت المذاكرة</h3>
                        <p class="text-gray-600">تقنية البومودورو للدراسة الفعالة</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg card-hover cursor-pointer" onclick="showSubjects()">
                    <div class="text-center">
                        <div class="bg-orange-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-graduation-cap text-orange-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold mb-2">إدارة المواد</h3>
                        <p class="text-gray-600">تتبع تقدمك في جميع المواد</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="text-center py-16">
            <div class="max-w-2xl mx-auto">
                <h2 class="text-4xl font-bold text-gray-800 mb-6">مرحباً بك في منصة الطالب الذكي</h2>
                <p class="text-xl text-gray-600 mb-8">منصة تعليمية ذكية تساعدك على تنظيم دراستك وتحقيق أهدافك الأكاديمية</p>
                <button onclick="showLogin()" class="gradient-bg text-white px-8 py-4 rounded-lg text-lg font-semibold hover:opacity-90">
                    ابدأ الآن
                </button>
            </div>
        </div>

        <!-- AI Assistant -->
        <div id="aiSection" class="hidden">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-6">المساعد الذكي</h2>
                <div id="chatMessages" class="h-96 overflow-y-auto border rounded-lg p-4 mb-4 bg-gray-50">
                    <div class="text-center text-gray-500 mt-32">
                        <i class="fas fa-robot text-4xl mb-4"></i>
                        <p>مرحباً! كيف يمكنني مساعدتك اليوم؟</p>
                    </div>
                </div>
                <div class="flex">
                    <input type="text" id="chatInput" placeholder="اكتب سؤالك هنا..." class="flex-1 p-3 border rounded-r-lg">
                    <button onclick="sendMessage()" class="bg-blue-600 text-white px-6 py-3 rounded-l-lg hover:bg-blue-700">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Study Timer -->
        <div id="timerSection" class="hidden">
            <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                <h2 class="text-2xl font-bold mb-6">مؤقت المذاكرة</h2>
                <div class="text-6xl font-bold text-purple-600 mb-8" id="timerDisplay">25:00</div>
                <div class="space-x-4 space-x-reverse">
                    <button id="startBtn" onclick="startTimer()" class="bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600">
                        ابدأ
                    </button>
                    <button id="pauseBtn" onclick="pauseTimer()" class="bg-yellow-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-yellow-600">
                        توقف
                    </button>
                    <button id="resetBtn" onclick="resetTimer()" class="bg-red-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600">
                        إعادة تعيين
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Global variables
        let isLoggedIn = false;
        let currentUser = null;
        let timerInterval = null;
        let timeLeft = 25 * 60; // 25 minutes in seconds

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            checkLogin();
            showWelcome();
        });

        // Authentication functions
        function checkLogin() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                isLoggedIn = true;
                updateUI();
                showDashboard();
            }
        }

        function showLogin() {
            document.getElementById('loginModal').classList.remove('hidden');
        }

        function hideLogin() {
            document.getElementById('loginModal').classList.add('hidden');
        }

        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (email && password) {
                currentUser = {
                    name: email.split('@')[0],
                    email: email,
                    points: 1250,
                    subjects: 5,
                    studyHours: 24
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                isLoggedIn = true;
                updateUI();
                hideLogin();
                showDashboard();
                showNotification('تم تسجيل الدخول بنجاح!', 'success');
            } else {
                showNotification('يرجى ملء جميع الحقول', 'error');
            }
        }

        function googleLogin() {
            // Simulate Google login
            currentUser = {
                name: 'طالب جوجل',
                email: 'student@gmail.com',
                points: 1500,
                subjects: 6,
                studyHours: 30
            };
            
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            isLoggedIn = true;
            updateUI();
            hideLogin();
            showDashboard();
            showNotification('تم تسجيل الدخول بجوجل بنجاح!', 'success');
        }

        function logout() {
            localStorage.removeItem('currentUser');
            currentUser = null;
            isLoggedIn = false;
            updateUI();
            showWelcome();
            showNotification('تم تسجيل الخروج بنجاح!', 'success');
        }

        function updateUI() {
            const loginBtn = document.getElementById('loginBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const userWelcome = document.getElementById('userWelcome');

            if (isLoggedIn) {
                loginBtn.classList.add('hidden');
                logoutBtn.classList.remove('hidden');
                userWelcome.classList.remove('hidden');
                userWelcome.textContent = `مرحباً، ${currentUser.name}`;
                
                // Update stats
                document.getElementById('userPoints').textContent = currentUser.points;
                document.getElementById('subjectCount').textContent = currentUser.subjects;
                document.getElementById('studyHours').textContent = currentUser.studyHours;
            } else {
                loginBtn.classList.remove('hidden');
                logoutBtn.classList.add('hidden');
                userWelcome.classList.add('hidden');
            }
        }

        // Navigation functions
        function showWelcome() {
            hideAllSections();
            document.getElementById('welcomeScreen').classList.remove('hidden');
        }

        function showDashboard() {
            if (!isLoggedIn) {
                showLogin();
                return;
            }
            hideAllSections();
            document.getElementById('dashboard').classList.remove('hidden');
        }

        function showAI() {
            hideAllSections();
            document.getElementById('aiSection').classList.remove('hidden');
        }

        function showTimer() {
            hideAllSections();
            document.getElementById('timerSection').classList.remove('hidden');
        }

        function showPlanner() {
            showNotification('المخطط الدراسي قيد التطوير!', 'info');
        }

        function showSubjects() {
            showNotification('إدارة المواد قيد التطوير!', 'info');
        }

        function hideAllSections() {
            const sections = ['welcomeScreen', 'dashboard', 'aiSection', 'timerSection'];
            sections.forEach(section => {
                document.getElementById(section).classList.add('hidden');
            });
        }

        // AI Chat functions
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, 'user');
                input.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        'هذا سؤال ممتاز! دعني أساعدك في الإجابة عليه.',
                        'يمكنني مساعدتك في هذا الموضوع. هل تريد المزيد من التفاصيل؟',
                        'بناءً على سؤالك، أنصحك بمراجعة المواد التالية...',
                        'هذا موضوع مهم في دراستك. دعني أشرح لك بطريقة مبسطة.',
                        'ممتاز! هذا يدل على فهمك العميق للموضوع.'
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(randomResponse, 'ai');
                }, 1000);
            }
        }

        function addMessage(message, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `mb-4 ${sender === 'user' ? 'text-left' : 'text-right'}`;
            
            messageDiv.innerHTML = `
                <div class="inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${
                    sender === 'user' 
                        ? 'bg-blue-600 text-white' 
                        : 'bg-gray-200 text-gray-800'
                }">
                    ${message}
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Timer functions
        function startTimer() {
            if (timerInterval) return;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    showNotification('انتهت جلسة المذاكرة! أحسنت!', 'success');
                    timeLeft = 25 * 60; // Reset to 25 minutes
                    updateTimerDisplay();
                }
            }, 1000);
        }

        function pauseTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function resetTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            timeLeft = 25 * 60;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Utility functions
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 left-4 px-6 py-3 rounded-lg text-white z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Enter key support for chat and login
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        document.getElementById('password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                login();
            }
        });
    </script>
</body>
</html>
